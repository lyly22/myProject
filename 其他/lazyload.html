<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <style>
            img{
                width:32%;
                height:500px;
            }
        </style>
    </head>
    <body>
    <img rel="http://img10.static.yhbimg.com/taobaocms/2016/01/22/01/01b90b3365feec111cdc10355710e73167.jpg" height="500" width="300" alt="">
    <img rel="http://img11.static.yhbimg.com/taobaocms/2016/01/19/10/01867dae3ea65b0295ccd0ae1309b154ca.jpg" height="500" width="500" alt="">
    <img rel="http://img12.static.yhbimg.com/taobaocms/2016/01/22/01/02e47e9850e8134a0e24f5f87054d2b427.jpg" height="300" width="300" alt="">
    <img rel="http://img12.static.yhbimg.com/taobaocms/2016/01/22/01/0203acb5d1771accbec624fad5374a8cc3.jpg" height="300" width="300" alt="">
    <img rel="http://img13.static.yhbimg.com/taobaocms/2016/01/22/01/023640fecd461d21055fc8cf268b830ae7.jpg" height="300" width="300" alt="">
    <img rel="http://img10.static.yhbimg.com/taobaocms/2016/01/22/01/01b90b3365feec111cdc10355710e73167.jpg" height="600" width="300" alt="" id="a">
    <img rel="http://img11.static.yhbimg.com/taobaocms/2016/01/19/10/01867dae3ea65b0295ccd0ae1309b154ca.jpg" height="500" width="500" alt="">
    <img rel="http://img12.static.yhbimg.com/taobaocms/2016/01/22/01/02e47e9850e8134a0e24f5f87054d2b427.jpg" height="300" width="300" alt="">
    <img rel="http://img12.static.yhbimg.com/taobaocms/2016/01/22/01/0203acb5d1771accbec624fad5374a8cc3.jpg" height="300" width="300" alt="">
    <img rel="http://img13.static.yhbimg.com/taobaocms/2016/01/22/01/023640fecd461d21055fc8cf268b830ae7.jpg" height="300" width="300" alt="">
    <img rel="http://img10.static.yhbimg.com/taobaocms/2016/01/22/01/01b90b3365feec111cdc10355710e73167.jpg" height="500" width="300" alt="" id="a">
    <img rel="http://img11.static.yhbimg.com/taobaocms/2016/01/19/10/01867dae3ea65b0295ccd0ae1309b154ca.jpg" height="500" width="500" alt="">
    <img rel="http://img12.static.yhbimg.com/taobaocms/2016/01/22/01/02e47e9850e8134a0e24f5f87054d2b427.jpg" height="300" width="300" alt="">
    <img rel="http://img12.static.yhbimg.com/taobaocms/2016/01/22/01/0203acb5d1771accbec624fad5374a8cc3.jpg" height="300" width="300" alt="">
    <img rel="http://img13.static.yhbimg.com/taobaocms/2016/01/22/01/023640fecd461d21055fc8cf268b830ae7.jpg" height="300" width="300" alt="">
    <img rel="http://img10.static.yhbimg.com/taobaocms/2016/01/22/01/01b90b3365feec111cdc10355710e73167.jpg" height="500" width="300" alt="" id="a">
    <img rel="http://img11.static.yhbimg.com/taobaocms/2016/01/19/10/01867dae3ea65b0295ccd0ae1309b154ca.jpg" height="500" width="500" alt="">
    <img rel="http://img12.static.yhbimg.com/taobaocms/2016/01/22/01/02e47e9850e8134a0e24f5f87054d2b427.jpg" height="300" width="300" alt="">
    <img rel="http://img12.static.yhbimg.com/taobaocms/2016/01/22/01/0203acb5d1771accbec624fad5374a8cc3.jpg" height="300" width="300" alt="">
    <img rel="http://img13.static.yhbimg.com/taobaocms/2016/01/22/01/023640fecd461d21055fc8cf268b830ae7.jpg" height="300" width="300" alt="">
    <img rel="http://img10.static.yhbimg.com/taobaocms/2016/01/22/01/01b90b3365feec111cdc10355710e73167.jpg" height="500" width="300" alt="" id="a">
    <img rel="http://img11.static.yhbimg.com/taobaocms/2016/01/19/10/01867dae3ea65b0295ccd0ae1309b154ca.jpg" height="500" width="500" alt="">
    <img rel="http://img12.static.yhbimg.com/taobaocms/2016/01/22/01/02e47e9850e8134a0e24f5f87054d2b427.jpg" height="300" width="300" alt="">
    <img rel="http://img12.static.yhbimg.com/taobaocms/2016/01/22/01/0203acb5d1771accbec624fad5374a8cc3.jpg" height="300" width="300" alt="">
    <img rel="http://img13.static.yhbimg.com/taobaocms/2016/01/22/01/023640fecd461d21055fc8cf268b830ae7.jpg" height="300" width="300" alt="">
    <img rel="http://img10.static.yhbimg.com/taobaocms/2016/01/22/01/01b90b3365feec111cdc10355710e73167.jpg" height="500" width="300" alt="" id="a">
    <img rel="http://img11.static.yhbimg.com/taobaocms/2016/01/19/10/01867dae3ea65b0295ccd0ae1309b154ca.jpg" height="500" width="500" alt="">
    <img rel="http://img12.static.yhbimg.com/taobaocms/2016/01/22/01/02e47e9850e8134a0e24f5f87054d2b427.jpg" height="300" width="300" alt="">
    <img rel="http://img12.static.yhbimg.com/taobaocms/2016/01/22/01/0203acb5d1771accbec624fad5374a8cc3.jpg" height="300" width="300" alt="">
    <img rel="http://img13.static.yhbimg.com/taobaocms/2016/01/22/01/023640fecd461d21055fc8cf268b830ae7.jpg" height="300" width="300" alt="">
    </body>
    <script>
        	var imgs=document.getElementsByTagName('img');
    		function getTop(ele){
    			var top=ele.offsetTop;
    			var parent=ele.offsetParent;
    			while(parent){
    				top+=parent.offsetTop;
    				if(window.navigator.userAgent.indexOf('MSIE 8')===-1){
    					top+=parent.clientTop;
    				}
    				parent=parent.offsetParent;
    			}
    			return top;
    		}
    		var winHeight=document.documentElement.clientHeight || document.body.clientHeight;
    		
    		console.log(winHeight)
    		for(var i=0;i<imgs.length;i++){
    			var cur=imgs[i];
    			var imgTop=getTop(cur);
    			console.log(imgTop);
    			if(imgTop<winHeight){
    				cur.setAttribute('src',cur.getAttribute('rel'));
    			}else{
    				cur.src='images/loading.jpg';
    			}
    		}
    		window.onscroll=function(){
    			var winTop=(document.documentElement.clientHeight || document.body.clientHeight) + (document.documentElement.scrollTop || document.body.scrollTop);
    			for(var i=0;i<imgs.length;i++){
    				var cur=imgs[i];
    				var imgTop=getTop(cur);
    				if(imgTop<winTop){
    					cur.setAttribute('src',cur.getAttribute('rel'));
    				}
    			}
    		}
    </script>
</html>